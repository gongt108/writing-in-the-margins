{% extends 'base.html' %}
{% load tailwind_filters %}
{% load crispy_forms_tags %}
{% block content %}
    <div class="bg-blue-100 min-w-[52rem] mx-auto w-fit flex flex-1 flex-col px-24 xl:pt-12 2xl:pt-20 pb-20">
        <h2 class="font-semibold text-xl mb-4 pb-2 border-b-2 border-gray-400">Notifications</h2>
        {% if results %}
            <table class="w-full border border-collapse">
                <thead>
                    <tr class="bg-slate-100 border">
                        <td class="pl-2 border" style="width: 60%;">Book</td>
                        <td class="pl-2 border" style="width: 20%;">Watch Price</td>
                        <td class="pl-2 border" style="width: 20%;"></td>
                    </tr>
                </thead>
                <tbody>
                    {% for result in results %}
                        <tr class="border items-center">
                            <td class=" pl-2">
                                <div class="flex">
                                    <a href="/book/{{ result.book.book_id }}"><img src={{ result.book.book_cover }} alt="book cover" width="50" height="75"></a>
                                    <div class="flex flex-col ml-4">
                                        <a href="/book/{{ result.book.book_id }}">
                                            <h3 class="font-bold text-md hover:underline">{{ result.book.title | slice:":50" }}</h3>
                                        </a>
                                        <p>by {{ result.book.contributors }}</p>
                                    </div>
                                </div>
                            </td>
                            <td class="pl-2">${{ result.price }}</td>
                            <td class="w-fit">
                                <form action=""
                                      method="post"
                                      class="flex items-center justify-end space-x-2 pe-2">
                                    {% csrf_token %}
                                    <input type="hidden" name="book_id_to_remove" value={{ result.book.book_id }}>
                                    <button type="submit"
                                            class="bg-white text-red-500 hover:border-2 hover:border-red-300  p-2 rounded-lg">
                                        Remove
                                    </button>
                                    <button type="submit"
                                            class="bg-white text-red-500 hover:border-2 hover:border-red-300  p-2 rounded-lg">
                                        Edit
                                    </button>
                                </form>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <h2 class="font-semibold text-xl mb-4 pb-2">No notifications created yet.</h2>
        {% endif %}
    </div>
{% endblock content %}
