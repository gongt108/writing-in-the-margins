{% extends 'base.html' %}
{% load tailwind_filters %}
{% load crispy_forms_tags %}
{% block content %}
    <div class="bg-blue-100 min-w-[52rem] mx-auto w-fit flex flex-col px-24 xl:pt-12 2xl:pt-20 pb-20">
        <form class="h-fit w-full min-w-fit mb-4 relative">
            <label for="default-search"
                   class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Search</label>
            <div class="relative">
                <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                    <svg class="w-4 h-4 text-gray-500 dark:text-gray-400"
                         aria-hidden="true"
                         xmlns="http://www.w3.org/2000/svg"
                         fill="none"
                         viewBox="0 0 20 20">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" />
                    </svg>
                </div>
                <input type="search"
                       id="default-search"
                       name="search"
                       class="mr-8 block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500"
                       placeholder="Search for books..."
                       required />
                <button type="submit"
                        class="text-white absolute end-2.5 bottom-2.5 bg-blue-600 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2">
                    Search
                </button>
            </div>
        </form>
        <div class="ml-4">
            <h2 class="font-semibold text-xl mb-4 pb-2 border-b-2 border-gray-400">Top 10 searches for {{ search_query }}...</h2>
            {% for result in search_results %}
                <div class="flex mb-2 border-b pb-4 border-gray-300">
                    <a href="/book"><img src={{ result.book_cover }} alt="book cover" width="50" height="75"></a>
                    <div class="flex flex-col ml-4">
                        <a href="/book">
                            <h3 class="font-bold text-md hover:underline">{{ result.title | slice:":50" }}</h3>
                        </a>
                        <p>by {{ result.author }}</p>
                        <div class="flex mt-2 items-center">
                            <svg class="w-4 h-4 text-yellow-300 me-1 align-middle"
                                 aria-hidden="true"
                                 xmlns="http://www.w3.org/2000/svg"
                                 fill="currentColor"
                                 viewBox="0 0 22 20">
                                <path d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
                            </svg>
                            <p class="text-sm mr-2">
                                {{ result.other_details }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endblock content %}
